const modalLetter=document.querySelector(".modal-letter"),modalMap=document.querySelector(".modal-map"),letterButton=document.querySelector(".info-form-link"),mapButton=document.querySelector(".map-link"),modalCloseButton=document.querySelectorAll(".modal-close"),letterForm=modalLetter.querySelector(".letter-form"),nameInput=modalLetter.querySelector(".letter-input-name"),emailInput=modalLetter.querySelector(".letter-input-email");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}function getSlideIndex(e){return e.replace(/[\D]+/g,"")-1}function switchSlides(e,t,l){let a=[...e].findIndex(e=>e.matches(".slide-item-current"));t[a].classList.remove("pagination-link-active"),e[a].classList.remove("slide-item-current");let o=getSlideIndex(l.getAttribute("href"));t[o].classList.add("pagination-link-active"),e[o].classList.add("slide-item-current")}letterButton.addEventListener("click",e=>{e.preventDefault(),modalLetter.style.display="block",modalLetter.classList.add("modal-show"),storage?(nameInput.value=storage,emailInput.focus()):nameInput.focus()}),mapButton.addEventListener("click",e=>{e.preventDefault(),modalMap.style.display="block",modalMap.classList.add("modal-show")}),modalCloseButton.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),modalLetter.style.display="none",modalMap.style.display="none",modalLetter.classList.remove("modal-error")})}),letterForm.addEventListener("submit",function(e){nameInput.value&&emailInput.value?isStorageSupport&&localStorage.setItem("name",nameInput.value):(e.preventDefault(),modalLetter.classList.remove("modal-error"),modalLetter.offsetWidth=modalLetter.offsetWidth,modalLetter.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(modalLetter.style.display="block")&&(e.preventDefault(),modalLetter.style.display="none",modalLetter.classList.remove("modal-error"))}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(modalMap.style.display="block")&&(e.preventDefault(),modalMap.style.display="none")});const productSlides=document.querySelectorAll(".slide-item"),dots=document.querySelectorAll(".pagination-link"),dotsBlock=document.querySelector(".pagination");dotsBlock.addEventListener("click",e=>{let t=e.target;t.matches(".pagination-link")&&(e.preventDefault(),switchSlides(productSlides,dots,t))});const serviceSlides=document.querySelectorAll(".advantage-item"),linksBlock=document.querySelector(".advantage-pagination"),links=linksBlock.querySelectorAll(".advantage-link");linksBlock.addEventListener("click",e=>{let t=e.target.closest(".advantage-link");console.log(t),t.matches(".advantage-link")&&(e.preventDefault(),switchSlides(serviceSlides,links,t))});